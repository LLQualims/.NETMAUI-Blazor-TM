@page "/APPAPVIS"

<h1>APPAPVIS</h1>

<p>Bienvenue dans votre nouvelle application.</p>

<button id="fetchDataButton">Fetch Data</button>
<ul id="apiResult"></ul>

<script>
    document.getElementById('fetchDataButton').addEventListener('click', async () => {
        const response = await fetch('http://192.168.39.68/8.1b/app/appareil/vis', {
            method: 'GET',
            headers: {
                'Authorization': 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJJZCI6ImI2NGQ5N2RkLTE4YTAtNDJkMi1hZTNkLWViM2Q5ZDRlYTQ5MCIsInN1YklkIjoiNzYiLCJzdWIiOiJLUCIsImp0aSI6IjFkZGEyODRmLTZjZTQtNGRlMC04NDEzLTk1NGI2YWI2YWM0MCIsIlByb2ZpbEVRTSI6IjYiLCJQcm9maWxMQUIiOiIxMCIsIm5iZiI6MTcxOTQ5ODE1OSwiZXhwIjoyMDE5NTAxNzU5LCJpYXQiOjE3MTk0OTgxNTksImlzcyI6IklOT0tZIiwiYXVkIjoiUVVBTElNUyJ9.TaF3QoT2AooxmPD6l_vXWFCnKDguU0pGiaGymo4_6mg'
            }
        });

        if (response.ok) {
            const data = await response.json();
            const apiResultElement = document.getElementById('apiResult');
            apiResultElement.innerHTML = '';
            data.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item;
                apiResultElement.appendChild(li);
            });
        } else {
            document.getElementById('apiResult').innerText = 'Erreur lors de la récupération des données.';
        }
    });
</script>